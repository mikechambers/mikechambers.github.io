
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>E4X : Retrieving a Sibling of a Node - Mike Chambers</title>
  <meta name="author" content="Mike Chambers">

  
  <meta name="description" content="One of the advantages of XML is that you can easily represent related information with a parent / child relationship. This makes it easy to parse, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mikechambers.github.io//2006/08/17/e4x-retrieving-a-sibling-of-a-node">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mike Chambers" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>-->
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-553659-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>



<body >

<!--
<body   >
-->
  <header role="banner"><hgroup>
  <h1><a href="/">Mike Chambers</a></h1>
  
    <h2>code is beautiful</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mikechambers.github.io/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">E4X : Retrieving a Sibling of a Node</h1>
    

    
      <p class="meta">
        <!--








  


<time datetime="2006-08-17T13:26:01-07:00" pubdate data-updated="true">Thursday, August 17, 2006</time>-->
        
      </p>
    
  </header>


<div class="entry-content"><p>One of the advantages of XML is that you can easily represent related information with a parent / child relationship. This makes it easy to parse, and understand. However, some XML formats (such as [Apple&#8217;s plist format][1]), represent relationships via proximity on the same level.</p>

<p>For example, one way to represent name / value pairs in XML could be:</p>

<!--more-->


<p>`</p>

<pre>
    <Artist>Interpol</Artist>
</pre>


<p><p>`</p>

<p>However, the plist format does this with key / value structure, so the above would be represented in XML as:</p>

<p>`
<pre></p>

<pre><code>&lt;key&gt;Artist&lt;/key&gt;&lt;string&gt;Interpol&lt;/string&gt;
</code></pre>

<p></pre>
<p>`</p>

<p>The relationship between key / value is dependent on proximity, and not hierarchy as in the first example. I won&#8217;t go into why Apple did this (I don&#8217;t know) or whether it is good or bad, but it does present some difficulties in parsing.</p>

<p>In order to reliably parse this, you must first retrieve the key node with the appropriate value, and then get the next node, which will contain the value for the preceding key. Thus, you must be able to retrieve the key node&#8217;s next sibling, in relation to its parent.</p>

<p>Here is an example:</p>

<p>`
<pre>
package {</p>

<pre><code>import flash.display.Sprite;

public class XMLTest extends Sprite
{
    public function XMLTest()
    {
        var xml:XML = 
            &lt;xml&gt;
                &lt;songs&gt;
                    &lt;song&gt;
                        &lt;key&gt;Artist&lt;/key&gt;&lt;string&gt;Interpol&lt;/string&gt;
                        &lt;key&gt;Track Number&lt;/key&gt;&lt;int&gt;7&lt;/int&gt;
                    &lt;/song&gt;
                    &lt;song&gt;
                        &lt;key&gt;Artist&lt;/key&gt;&lt;string&gt;Bloc Party&lt;/string&gt;
                        &lt;key&gt;Track Number&lt;/key&gt;&lt;int&gt;3&lt;/int&gt;
                    &lt;/song&gt;                     
                &lt;/songs&gt;
            &lt;/xml&gt;

        var temp:XML;
        var artistName:String;  

        //loop through all of the songs
        for each (var song:XML in xml.songs.song)
        {
            //get the node for key in the first song that has the Artist value
            temp = song.key.(text() == "Artist")[0];

            //get the next node (i.e. the key nodes next sibling). and save it as a Stirng
            artistName = String(temp.parent().children()[temp.childIndex() + 1]);

            trace(artistName);
        }   
    }
}
</code></pre>

<p>}
</pre>
<p>`</p>

<p>The important part is this line:</p>

<p><code>
&lt;pre&gt;temp.parent().children()[temp.childIndex() + 1]&lt;/pre&gt;
&lt;p&gt;</code></p>

<p>Basically, this gets the temp node&#8217;s next sibling. To get the previous sibling, just subtract 1 like so:</p>

<p><code>
&lt;pre&gt;
temp.parent().children()[temp.childIndex() - 1]
&lt;/pre&gt;
&lt;p&gt;</code></p>

<p>Anyways, took me some trial and error to figure out. I [added some APIs to the XMLUtil class in corelib][2], that encapsulate this. They are already included in source, and will be compiled into the SWC at the next release. You can view the class and APIs [here][2]. You can find more information on the corelib API [here][3].</p>

<p> [1]: <a href="http://www.google.com/search?q=apple%20plist%20xml">http://www.google.com/search?q=apple%20plist%20xml</a>
 [2]: <a href="http://labs.adobe.com/svn/flashplatform/?/projects/corelib/trunk/src/actionscript3/com/adobe/utils/XMLUtil.as">http://labs.adobe.com/svn/flashplatform/?/projects/corelib/trunk/src/actionscript3/com/adobe/utils/XMLUtil.as</a>
 [3]: <a href="http://labs.adobe.com/wiki/index.php/ActionScript_3:resources:apis:libraries#corelib">http://labs.adobe.com/wiki/index.php/ActionScript_3:resources:apis:libraries#corelib</a></p>
</div>


  <footer>
    <p class="meta">
      <!--
  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>

      








  


<time datetime="2006-08-17T13:26:01-07:00" pubdate data-updated="true">Thursday, August 17, 2006</time>
-->

  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>
 on 








  


<time datetime="2006-08-17T13:26:01-07:00" pubdate data-updated="true">Thursday, August 17, 2006</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/general/'>General</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://mikechambers.github.io//2006/08/17/e4x-retrieving-a-sibling-of-a-node/" data-via="mesh" data-counturl="http://mikechambers.github.io//2006/08/17/e4x-retrieving-a-sibling-of-a-node/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2006/08/14/asdoc-as3-doc-generating-tool-on-labs/" title="Previous Post: AsDoc (AS3 Doc Generating Tool) on Labs">&laquo; AsDoc (AS3 Doc Generating Tool) on Labs</a>
      
      
        <a class="basic-alignment right" href="/2006/08/24/apollo-london-tonight/" title="Next Post: Apollo, London, Tonight">Apollo, London, Tonight &raquo;</a>
      
    </p>
  </footer>
</article>

</div>
<!--

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/14/test-post/">Test Post</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/08/simple-http-server-for-local-testing/">Simple HTTP Server for Local Testing</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/02/north-american-flash-community-tour/">North American Flash Community Tour</a>
      </li>
    
      <li class="post">
        <a href="/2012/02/22/flash-roadmap-whitepaper-published/">Flash Roadmap Whitepaper Published</a>
      </li>
    
      <li class="post">
        <a href="/2012/02/13/in-europe-to-discuss-flash-roadmap/">In Europe to Discuss Flash Roadmap</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mikechambers">@mikechambers</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mikechambers',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:mikechambers">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "mikechambers"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/mikechambers@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

-->

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mike Chambers -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mikechambers';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>


<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Sorting Date Fields in a DataGrid in the Flex Framework - Mike Chambers</title>
  <meta name="author" content="Mike Chambers">

  
  <meta name="description" content="I was working on some new mini chart apps over the weekend for the [MXNA reports section][1], and had a DataGrid that contained dates. I wanted to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mikechambers.github.io//blog/2005/04/27/sorting-date-fields-in-a-datagrid-in-the-flex-framework">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/blog/atom.xml" rel="alternate" title="Mike Chambers" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>-->
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-553659-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>



<body >

<!--
<body   >
-->
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Mike Chambers</a></h1>
  
    <h2>code is beautiful</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mikechambers.github.io//blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Sorting Date Fields in a DataGrid in the Flex Framework</h1>
    

    
      <p class="meta">
        <!--








  


<time datetime="2005-04-27T00:00:00-07:00" pubdate data-updated="true"></time>-->
        
      </p>
    
  </header>


<div class="entry-content"><p>I was working on some new mini chart apps over the weekend for the [MXNA reports section][1], and had a DataGrid that contained dates. I wanted to allow the user to sort the datagrid by the DateField, but by default the DataGrid sorts dates with a string compare (calling toString on the Date instance).</p>

<p>I tried to set up a custom sort function for the DataGridColumn instance that contained the dates, but because I was using a custom label format function for the column, Flex passed the labels to me, and not the data items (which would allow me to get access to the Date instance). Because of this, I couldn&#8217;t sort on the date.</p>

<!--more-->


<p>There is an [example on Macromedia.com][2] that shows how to sort by dates, but it requires that you override and implement all sorting for the DataGrid (something which seemed unecessary and overkill to me). Peter Ent also [posted an example][3], but it required massaging the data on the server first, something which was not an option for me since I was using a public web service API.</p>

<p>So, after much trial and error, and help from [Matt Chotin][4], I finally got it working, and figured I would post it here.</p>

<p>Basically, I listen for the headerRelease event for the DataGrid. If it is in response to the date column being clicked, then I sort the dataprovider that the DataGrid is hooked up to (otherwise, I do nothing, and let the DataGrid do the sorting).</p>

<p>Here is an example:</p>

<p>Here is the Code:</p>

<p>&#8212;&#8212;&#8212;-DateSortExample.mxml&#8212;&#8212;&#8212;&ndash;</p>

<p>`</p>

<pre><?xml version="1.0"?>

<mx:Application xmlns:mx="http://www.macromedia.com/2003/mxml" initialize="initTag()"
    backgroundColor="0xFFFFFF" marginTop="0" marginLeft="0" marginRight="0" marginBottom="0">       
    
    <mx:Script source="DateSortExample.as" />   

    <mx:Panel title="DataGrid Date sorting example" width="475" height="350">
    
        <mx:DataGrid id="dg" height="100%" width="100%">
                <mx:columns>
                <mx:Array>
                        <mx:DataGridColumn headerText="Letters" width="50" columnName="letter" />
                        <mx:DataGridColumn headerText="Numbers" width="50" columnName="number" />
                        <mx:DataGridColumn headerText="Dates" columnName="date" />
                   </mx:Array>
                </mx:columns>
        </mx:DataGrid>
    
    </mx:Panel>
</mx:Application></pre>


<p><p>`</p>

<p>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&ndash;</p>

<p>&#8212;&#8212;&#8212;-DateSortExample.as&#8212;&#8212;&#8212;&ndash;</p>

<p>`
<pre></p>

<p>private var dp:Array;
private var sortOrder:Number = 1;</p>

<p>private  function initTag():Void
{</p>

<pre><code>//listend for the headerRelease event on the datagrid, which is broadcast
//when any of the column headers are clicked.
dg.addEventListener("headerRelease",
    mx.utils.Delegate.create(this, onDateHeaderRelease));

dp = new Array();

//pupulate the date grid with some data.
var item:Object;
var randomDay:Number;
var randomMonth:Number;
for(var i:Number = 0; i &lt; 15; i++)
{
    randomDay = Math.floor(Math.random() * 30);
    randomMonth = Math.floor(Math.random() * 12);

    item = new Object();
    item.date = new Date(2005, randomMonth, randomDay);
    item.letter = String.fromCharCode(i + 65);
    item.number = i;

    dp.push(item);
}

//set the dataProvider for the datagrid
dg.dataProvider = dp;
</code></pre>

<p>}</p>

<p>//Note, this should be in a DateUtils class
/*</p>

<pre><code>returns
-1 : first date is larger than the second
 1 : first date is smaller than the second
 0 : Both dates are the same
</code></pre>

<p>*/
private static function compareDates(d1:Date, d2:Date):Number
{</p>

<pre><code>var d1ms:Number = d1.getTime();
var d2ms:Number = d2.getTime();

if(d1ms &gt; d2ms)
{
    return -1;
}
else if(d1ms &lt; d2ms)
{
    return 1;
}
else
{
    return 0;
}
</code></pre>

<p>}</p>

<p>//compares the dates
private function dateFieldCompare(item1:Object, item2:Object, bit:Number):Number
{</p>

<pre><code>//determine which way the column should be sorted (ASC or DESC
var toggle:Number = (bit == Array.DESCENDING)? 1 : -1;

//call compare date function, and then toggle the sort direction
return toggle * compareDates(item1.date,item2.date);
</code></pre>

<p>}</p>

<p>//called when any of the datagrids column headings are clicked
private function onDateHeaderRelease(eventObj:Object):Void
{</p>

<pre><code>//Only sort if the Date column head was clicked
if(eventObj.columnIndex == 2)
{
    //sort the dataProvider directly, passing the function to do the sort
    //and a bit indicating whether to sort ascending or descending
    dp.sortItems(dateFieldCompare, ((sortOrder == 1)? 0: Array.DESCENDING));

    //reverse the sort order so the next time the column is clicked, it is
    //sorted in the reverse order
    sortOrder *= -1;
}
</code></pre>

<p>}</pre>
<p>`</p>

<p>&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&ndash;</p>

<p>You can download the source from [here][5] (or right click on the example).</p>

<p><!-- Creative Commons License --></p>

<p><a rel="license" href="http://creativecommons.org/licenses/by/2.0/"><img alt="Creative Commons License" border="0" src="http://creativecommons.org/images/public/somerights20.gif" /></a></p>

<p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/2.0/">Creative Commons License</a>.<br/>
<!-- /Creative Commons License --></p>

<p><!--</p></p>

<p>&lt;rdf:RDF xmlns=&ldquo;<a href="http://web.resource.org/cc/">http://web.resource.org/cc/</a>&#8221;<br/>
xmlns:dc=&#8221;<a href="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</a>&#8221;<br/>
xmlns:rdf=&#8221;<a href="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</a>&rdquo;><br/>
<Work rdf:about=""><license rdf:resource="http://creativecommons.org/licenses/by/2.0/" /> </Work></p>

<p><License rdf:about="http://creativecommons.org/licenses/by/2.0/"><permits rdf:resource="http://web.resource.org/cc/Reproduction" /> <permits rdf:resource="http://web.resource.org/cc/Distribution" /> <requires rdf:resource="http://web.resource.org/cc/Notice" /></p>

<p><requires rdf:resource="http://web.resource.org/cc/Attribution" /></p> <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks" /> </License></p>
&lt;/rdf:RDF><br/>
&#8211;></p>

<p> [1]: <a href="http://weblogs.macromedia.com/mxna/reports/">http://weblogs.macromedia.com/mxna/reports/</a>
 [2]: <a href="http://www.macromedia.com/support/documentation/en/flex/1_5/releasenotes.html#latenews">http://www.macromedia.com/support/documentation/en/flex/1_5/releasenotes.html#latenews</a>
 [3]: /pent/archives/006686.cfm
 [4]: /mchotin/
 [5]: /mesh/files/DateSortExample/DateSortExample.zip</p>
</div>


  <footer>
    <p class="meta">
      <!--
  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>

      








  


<time datetime="2005-04-27T00:00:00-07:00" pubdate data-updated="true"></time>
-->

  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>
 on 








  


<time datetime="2005-04-27T00:00:00-07:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/blog/categories/flex/'>Flex</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="/blog//twitter.com/share" class="twitter-share-button" data-url="http://mikechambers.github.io//blog/2005/04/27/sorting-date-fields-in-a-datagrid-in-the-flex-framework/" data-via="mesh" data-counturl="http://mikechambers.github.io//blog/2005/04/27/sorting-date-fields-in-a-datagrid-in-the-flex-framework/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2005/04/26/mxna-reports-flex-flash-ajax-integration/" title="Previous Post: MXNA Reports : Flex / Flash / AJAX Integration">&laquo; MXNA Reports : Flex / Flash / AJAX Integration</a>
      
      
        <a class="basic-alignment right" href="/blog/2005/04/29/macromedia-tools-and-apples-tiger/" title="Next Post: Macromedia Tools and Apple&#8217;s Tiger">Macromedia Tools and Apple&#8217;s Tiger &raquo;</a>
      
    </p>
  </footer>
</article>

</div>
<!--

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2013/12/14/test-post/">Test Post</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/08/simple-http-server-for-local-testing/">Simple HTTP Server for Local Testing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/02/north-american-flash-community-tour/">North American Flash Community Tour</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/22/flash-roadmap-whitepaper-published/">Flash Roadmap Whitepaper Published</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/13/in-europe-to-discuss-flash-roadmap/">In Europe to Discuss Flash Roadmap</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mikechambers">@mikechambers</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mikechambers',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:mikechambers">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "mikechambers"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/mikechambers@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

-->

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mike Chambers -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mikechambers';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>

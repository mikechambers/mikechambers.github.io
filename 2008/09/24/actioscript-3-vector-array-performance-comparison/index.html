
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ActionScript 3 Vector / Array Performance Comparison - Mike Chambers</title>
  <meta name="author" content="Mike Chambers">

  
  <meta name="description" content="In my original post on the new Flash Player 10 Vector class, I did a simple example that showed Vectors being slightly faster than Array when just &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mikechambers.github.io//2008/09/24/actioscript-3-vector-array-performance-comparison">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mike Chambers" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>-->
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-553659-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>



<body >

<!--
<body   >
-->
  <header role="banner"><hgroup>
  <h1><a href="/">Mike Chambers</a></h1>
  
    <h2>code is beautiful</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mikechambers.github.io/" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">ActionScript 3 Vector / Array Performance Comparison</h1>
    

    
      <p class="meta">
        <!--








  


<time datetime="2008-09-24T13:19:01-07:00" pubdate data-updated="true">Wednesday, September 24, 2008</time>-->
        
      </p>
    
  </header>


<div class="entry-content"><p>In my <a href="http://www.mikechambers.com/blog/2008/08/19/using-vectors-in-actionscript-3-and-flash-player-10/">original post on the new Flash Player 10 Vector class</a>, I did a simple example that showed Vectors being slightly faster than Array when just populating and looping through collections.</p>

<p>Below is another example that shows a more significant performance increase when using Vectors. In this example, I populate an Array and Vector with 5 million random numbers, and then loop through them and average all of the numbers.</p>

<!--more-->


<p>Running the test on my MacBook Pro, the Vector is about 60% faster:</p>

<p><strong>Vector</strong> 1.824<br/>
<strong>Array</strong> 2.938<br/>
62.08 %</p>

<p>Here is the code:</p>

<div class="highlight">
  <pre>package {
    <span style="color: #008000; font-weight: bold">import</span> flash.display.Sprite<span style="color: #666666">;</span>
    <span style="color: #008000; font-weight: bold">import</span> __AS3__.vec.Vector<span style="color: #666666">;</span>

    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">class</span> VectorPerformance <span style="color: #008000; font-weight: bold">extends</span> Sprite
    {
        <span style="color: #008000; font-weight: bold">private</span> <span style="color: #008000; font-weight: bold">static</span> const LENGTH<span style="color: #666666">:</span>int <span style="color: #666666">=</span> <span style="color: #666666">5000000;</span>
        
        <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">function</span> VectorPerformance()
        {
            <span style="color: #408080; font-style: italic">//vector performance</span>
            <span style="color: #008000; font-weight: bold">var</span> vectorStartTime<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> getTime();
            
            <span style="color: #008000; font-weight: bold">var</span> v<span style="color: #666666">:</span>Vector.<span style="color: #666666">&lt;</span><span style="color: #008000">Number</span><span style="color: #666666">&gt;</span> <span style="color: #666666">=</span> generateVector();
            <span style="color: #008000; font-weight: bold">var</span> vAvg<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> averageVector(v);
            
            <span style="color: #008000; font-weight: bold">var</span> vectorTime<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> (getTime() <span style="color: #666666">-</span> vectorStartTime) <span style="color: #666666">/</span> <span style="color: #666666">1000;</span>
            
            <span style="color: #408080; font-style: italic">//array performance</span>
            <span style="color: #008000; font-weight: bold">var</span> arrayStartTime<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> getTime();
            
            <span style="color: #008000; font-weight: bold">var</span> a<span style="color: #666666">:</span><span style="color: #008000">Array</span> <span style="color: #666666">=</span> generateArray();
            <span style="color: #008000; font-weight: bold">var</span> aAvg<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> averageArray(a);
            
            <span style="color: #008000; font-weight: bold">var</span> arrayTime<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> (getTime() <span style="color: #666666">-</span> arrayStartTime) <span style="color: #666666">/</span> <span style="color: #666666">1000;</span>
            
            <span style="color: #0000FF">trace</span>(<span style="color: #BA2121">"Vector"</span><span style="color: #666666">,</span> vectorTime);
            <span style="color: #0000FF">trace</span>(<span style="color: #BA2121">"Array"</span><span style="color: #666666">,</span> arrayTime);
            <span style="color: #0000FF">trace</span>((vectorTime<span style="color: #666666">/</span>arrayTime) <span style="color: #666666">*</span> <span style="color: #666666">100</span> <span style="color: #666666">+</span> <span style="color: #BA2121">" %"</span>);
        }
        
        <span style="color: #008000; font-weight: bold">private</span> <span style="color: #008000; font-weight: bold">function</span> generateVector()<span style="color: #666666">:</span>Vector.<span style="color: #666666">&lt;</span><span style="color: #008000">Number</span><span style="color: #666666">&gt;</span>
        {
            <span style="color: #008000; font-weight: bold">var</span> v<span style="color: #666666">:</span>Vector.<span style="color: #666666">&lt;</span><span style="color: #008000">Number</span><span style="color: #666666">&gt;</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> Vector.<span style="color: #666666">&lt;</span><span style="color: #008000">Number</span><span style="color: #666666">&gt;</span>(LENGTH<span style="color: #666666">,</span> <span style="color: #008000; font-weight: bold">true</span>);
            
            <span style="color: #008000; font-weight: bold">for</span>(<span style="color: #008000; font-weight: bold">var</span> i<span style="color: #666666">:</span>int <span style="color: #666666">=</span> <span style="color: #666666">0;</span> i <span style="color: #666666">&lt;</span> LENGTH<span style="color: #666666">;</span> i<span style="color: #666666">++</span>)
            {
                v[i] <span style="color: #666666">=</span> <span style="color: #008000">Math</span>.random() <span style="color: #666666">*</span> <span style="color: #666666">100000;</span>
            }
        
            <span style="color: #008000; font-weight: bold">return</span> v<span style="color: #666666">;</span>    
        }
        
        <span style="color: #008000; font-weight: bold">private</span> <span style="color: #008000; font-weight: bold">function</span> averageVector(v<span style="color: #666666">:</span>Vector.<span style="color: #666666">&lt;</span><span style="color: #008000">Number</span><span style="color: #666666">&gt;</span>)<span style="color: #666666">:</span><span style="color: #008000">Number</span>
        {           
            <span style="color: #008000; font-weight: bold">var</span> sum<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> <span style="color: #666666">0;</span>
            <span style="color: #008000; font-weight: bold">var</span> len<span style="color: #666666">:</span>int <span style="color: #666666">=</span> v.length<span style="color: #666666">;</span>
            
            <span style="color: #008000; font-weight: bold">for</span>(<span style="color: #008000; font-weight: bold">var</span> i<span style="color: #666666">:</span>int <span style="color: #666666">=</span> <span style="color: #666666">0;</span> i <span style="color: #666666">&lt;</span> LENGTH<span style="color: #666666">;</span> i<span style="color: #666666">++</span>)
            {
                sum <span style="color: #666666">+=</span> v[i];
            }
            
            <span style="color: #008000; font-weight: bold">return</span> (sum <span style="color: #666666">/</span> len);
        }
        
        
        <span style="color: #008000; font-weight: bold">private</span> <span style="color: #008000; font-weight: bold">function</span> generateArray()<span style="color: #666666">:</span><span style="color: #008000">Array</span>
        {
            <span style="color: #008000; font-weight: bold">var</span> a<span style="color: #666666">:</span><span style="color: #008000">Array</span> <span style="color: #666666">=</span> <span style="color: #008000; font-weight: bold">new</span> <span style="color: #008000">Array</span>(LENGTH);
            
            <span style="color: #008000; font-weight: bold">for</span>(<span style="color: #008000; font-weight: bold">var</span> i<span style="color: #666666">:</span>int <span style="color: #666666">=</span> <span style="color: #666666">0;</span> i <span style="color: #666666">&lt;</span> LENGTH<span style="color: #666666">;</span> i<span style="color: #666666">++</span>)
            {
                a[i] <span style="color: #666666">=</span> <span style="color: #008000">Math</span>.random() <span style="color: #666666">*</span> <span style="color: #666666">100000;</span>
            }
        
            <span style="color: #008000; font-weight: bold">return</span> a<span style="color: #666666">;</span>    
        }
        
        <span style="color: #008000; font-weight: bold">private</span> <span style="color: #008000; font-weight: bold">function</span> averageArray(arr<span style="color: #666666">:</span><span style="color: #008000">Array</span>)<span style="color: #666666">:</span><span style="color: #008000">Number</span>
        {           
            <span style="color: #008000; font-weight: bold">var</span> sum<span style="color: #666666">:</span><span style="color: #008000">Number</span> <span style="color: #666666">=</span> <span style="color: #666666">0;</span>
            <span style="color: #008000; font-weight: bold">var</span> len<span style="color: #666666">:</span>int <span style="color: #666666">=</span> arr.length<span style="color: #666666">;</span>
            
            <span style="color: #008000; font-weight: bold">for</span>(<span style="color: #008000; font-weight: bold">var</span> i<span style="color: #666666">:</span>int <span style="color: #666666">=</span> <span style="color: #666666">0;</span> i <span style="color: #666666">&lt;</span> LENGTH<span style="color: #666666">;</span> i<span style="color: #666666">++</span>)
            {
                sum <span style="color: #666666">+=</span> arr[i];
            }
            
            <span style="color: #008000; font-weight: bold">return</span> (sum <span style="color: #666666">/</span> len);
        }       
        
        <span style="color: #008000; font-weight: bold">private</span> <span style="color: #008000; font-weight: bold">function</span> getTime()<span style="color: #666666">:</span><span style="color: #008000">Number</span>
        {
            <span style="color: #008000; font-weight: bold">return</span> (<span style="color: #008000; font-weight: bold">new</span> <span style="color: #008000">Date</span>()).getTime();
        }
    }
}
</pre>
</div>


<p>Of course, this is only one test. Depending on what you are doing, Vectors may be even faster, or slower.</p>

<p>One interesting note, originally my test had each collection sorted before they were averaged, but it turned out that sorting Vector was slower than sorting the Array. Not sure if this is a bug, but I have reported it to the player team.</p>
</div>


  <footer>
    <p class="meta">
      <!--
  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>

      








  


<time datetime="2008-09-24T13:19:01-07:00" pubdate data-updated="true">Wednesday, September 24, 2008</time>
-->

  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>
 on 








  


<time datetime="2008-09-24T13:19:01-07:00" pubdate data-updated="true">Wednesday, September 24, 2008</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/general/'>General</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://mikechambers.github.io//2008/09/24/actioscript-3-vector-array-performance-comparison/" data-via="mesh" data-counturl="http://mikechambers.github.io//2008/09/24/actioscript-3-vector-array-performance-comparison/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2008/09/23/adobe-flash-cs4-announced/" title="Previous Post: Adobe Flash CS4 Announced">&laquo; Adobe Flash CS4 Announced</a>
      
      
        <a class="basic-alignment right" href="/2008/09/25/video-overview-of-new-features-in-flash-cs4/" title="Next Post: Video overview of new features in Flash CS4">Video overview of new features in Flash CS4 &raquo;</a>
      
    </p>
  </footer>
</article>

</div>
<!--

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/14/test-post/">Test Post</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/08/simple-http-server-for-local-testing/">Simple HTTP Server for Local Testing</a>
      </li>
    
      <li class="post">
        <a href="/2012/04/02/north-american-flash-community-tour/">North American Flash Community Tour</a>
      </li>
    
      <li class="post">
        <a href="/2012/02/22/flash-roadmap-whitepaper-published/">Flash Roadmap Whitepaper Published</a>
      </li>
    
      <li class="post">
        <a href="/2012/02/13/in-europe-to-discuss-flash-roadmap/">In Europe to Discuss Flash Roadmap</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mikechambers">@mikechambers</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mikechambers',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:mikechambers">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "mikechambers"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/mikechambers@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

-->

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mike Chambers -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mikechambers';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>

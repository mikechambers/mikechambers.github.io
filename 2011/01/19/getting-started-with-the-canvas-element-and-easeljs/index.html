
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting Started With the Canvas Element and EaselJS - Mike Chambers</title>
  <meta name="author" content="Mike Chambers">

  
  <meta name="description" content="One of the features of HTML5 that developers are most excited about is the Canvas element. The Canvas element essentials provides a bitmap canvas for &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.mikechambers.com/blog/2011/01/19/getting-started-with-the-canvas-element-and-easeljs">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Mike Chambers" type="application/atom+xml">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>-->
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-553659-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>



<body >

<!--
<body   >
-->
  <header role="banner"><hgroup>
  <h1><a href="/blog/">Mike Chambers</a></h1>
  
    <h2>code is beautiful</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.mikechambers.com/blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Getting Started With the Canvas Element and EaselJS</h1>
    

    
      <p class="meta">
        <!--








  


<time datetime="2011-01-19T00:00:00-08:00" pubdate data-updated="true"></time>-->
        
      </p>
    
  </header>


<div class="entry-content"><p>One of the features of HTML5 that developers are most excited about is the <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element">Canvas</a> element. The Canvas element essentials provides a bitmap canvas for dynamically rendering shapes and bitmap graphics. It is very similar to the Flash Player&#8217;s <a href="http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/display/Bitmap.html">Bitmap</a> and <a href="http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/display/BitmapData.html">BitmapData</a> classes.</p>

<p>However, working with the Canvas element can be difficult, especially if you need to manage, update and or / animate multiple shapes and bitmaps. Unlike the Flash Player, the Canvas element does not have a concept of a display list or individual items to render. Instead, it provides a single Canvas on which to draw, and it is up to the developer to determine what needs to be rendered and when.</p>

<p><a href="http://gskinner.com/">Grant Skinner</a> has release a JavaScript library named <a href="http://www.easeljs.com">EaselJS</a>, which attempts to provide a Flash like DisplayList API in order to make it easier to work with the Canvas element. The library is just an alpha release, but is surprisingly full featured at this early stage. If you are interested in experimenting with the Canvas API, this is a great way to get started.</p>

<!--more-->


<p>In this post, I will show how to get started animating content in the Canvas element using the EaselJS JavaScript library.</p>

<p>Here is a list of the main classes in the library:</p>

<ul>
<li><strong>DisplayObject</strong> : Abstract base class for all display elements in EaselJS. Exposes all of the display properties (ex. x, y, rotation, scaleX, scaleY, alpha, shadow, etc) that are common to all display objects.</li>
<li><strong>Stage</strong> : The root level display container for display elements that wraps the Canvas element.</li>
<li><strong>Container</strong> : A nestable display container, which lets you aggregate display objects and manipulate them as a group.</li>
<li><strong>Text</strong> : Renders text in the context of the display list.</li>
<li><strong>Bitmap</strong> : Draws an image, video or canvas to the canvas according to its display properties.</li>
<li><strong>BitmapSequence</strong> : Displays animated or dynamic sprite sheets (images with multiple frames on a grid), and provides APIs for managing playback and sequencing.</li>
<li><strong>Graphics</strong> : Provides a simple but powerful API for dynamically drawing vector graphics.</li>
<li><strong>Shape</strong> : Renders vector art via the Graphics object within the context of the display list.</li>
</ul>


<p>You can view the complete api docs <a href="http://easeljs.com/docs/">here</a>.</p>

<p>Now, before we get started, lets look at where you can actually use the Canvas element (and thus EaselJS). Canvas is part of the HTML5 specification, and is supported in the latest version of most current browsers, including:</p>

<ul>
<li>Safari</li>
<li>Google Chrome</li>
<li>Opera</li>
<li>Firefox</li>
</ul>


<p>However, there is one exception, and it is a pretty big one. Internet Explorer does not currently support the Canvas element (although the next version of the Internet Explorer will). According to NetMarketShare, <a href="http://marketshare.hitslink.com/browser-market-share.aspx?qprid=2">Internet Explorer 6, 7 and 8 make up about 57% of the browser market</a>, which is a large segment of users. There is a project named <a href="http://excanvas.sourceforge.net/">ExplorerCanvas</a> that attempts to replicate Canvas support in Internet Explorer, but EaselJS has not been tested with it yet. Keep these points in mind when considering using the Canvas element.</p>

<p>Now that we have a good idea of where and when we can use the Canvas element, lets look at a simple example. In this example, we will use EaselJS to dynamically draw a circle and animate it across the Canvas. This will show us how to set up the library, introduce us to some basic concepts when working with the library, and show how to animate a graphic.</p>

<p>First, here is the working example:</p>

<div width="400" height="300" id="canvasWrapper">
    <canvas width="400" height="300" id="stageCanvas"></canvas>
</div>


<p><link rel="stylesheet" href="/blog/blog/post_files/getting-started-with-the-canvas-element-and-easeljs/styles.css"></p>

<script src="/blog/scripts/easeljs.js"></script>


<br />


<script src="/blog/blog/post_files/getting-started-with-the-canvas-element-and-easeljs/Main.js"></script>


<p>Now, lets look at the code, with comments:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;author&quot;</span> <span class="na">content=</span><span class="s">&quot;Mike Chambers&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;keywords&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;description&quot;</span> <span class="na">content=</span><span class="s">&quot;&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;copyright&quot;</span> <span class="na">content=</span><span class="s">&quot;Mike Chambers&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;robots&quot;</span> <span class="na">content=</span><span class="s">&quot;index,follow&quot;</span> <span class="nt">/&gt;</span>   
</span><span class='line'>  
</span><span class='line'>  <span class="nt">&lt;title&gt;</span>TITLE<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nt">&lt;style&gt;</span>
</span><span class='line'>      <span class="nf">#stageCanvas</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">background-color</span><span class="o">:</span><span class="m">#333333</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="nt">&lt;/style&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c">&lt;!-- import the Easel library. Downloaded from:</span>
</span><span class='line'><span class="c">      http://easeljs.com/</span>
</span><span class='line'><span class="c">  --&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;scripts/easel.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;script&gt;</span>
</span><span class='line'>      <span class="c1">//EaselJS Stage instance that wraps the Canvas element</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">stage</span><span class="p">;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">//EaselJS Shape instance that we will animate</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">circle</span><span class="p">;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">//radius of the circle Graphics that we will draw.</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">CIRCLE_RADIUS</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">//x position that we will reset Shape to when it goes off</span>
</span><span class='line'>      <span class="c1">//screen</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">circleXReset</span><span class="p">;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">//EaselJS Rectangle instance we will use to store the bounds</span>
</span><span class='line'>      <span class="c1">//of the Canvas</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">bounds</span><span class="p">;</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">//initialize function, called when page loads.</span>
</span><span class='line'>      <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="c1">//check and see if the canvas element is supported in</span>
</span><span class='line'>          <span class="c1">//the current browser</span>
</span><span class='line'>          <span class="c1">//http://diveintohtml5.org/detect.html#canvas</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">!!</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">).</span><span class="nx">getContext</span><span class="p">))</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="kd">var</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;canvasWrapper&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="nx">wrapper</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;Your browser does not appear to support &quot;</span> <span class="o">+</span>
</span><span class='line'>              <span class="s2">&quot;the HTML5 Canvas element&quot;</span><span class="p">;</span>
</span><span class='line'>              <span class="k">return</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//get a reference to the canvas element</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;stageCanvas&quot;</span><span class="p">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//copy the canvas bounds to the bounds instance.</span>
</span><span class='line'>          <span class="c1">//Note, if we resize the canvas, we need to reset</span>
</span><span class='line'>          <span class="c1">//these bounds.</span>
</span><span class='line'>          <span class="nx">bounds</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Rectangle</span><span class="p">();</span>
</span><span class='line'>          <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
</span><span class='line'>          <span class="nx">bounds</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//pass the canvas element to the EaselJS Stage instance</span>
</span><span class='line'>          <span class="c1">//The Stage class abstracts away the Canvas element and</span>
</span><span class='line'>          <span class="c1">//is the root level display container for display elements.</span>
</span><span class='line'>          <span class="nx">stage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stage</span><span class="p">(</span><span class="nx">canvas</span><span class="p">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//Create an EaselJS Graphics element to create the</span>
</span><span class='line'>          <span class="c1">//commands to draw a circle</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Graphics</span><span class="p">();</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//stroke of 1 px</span>
</span><span class='line'>          <span class="nx">g</span><span class="p">.</span><span class="nx">setStrokeStyle</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//Set the stroke color, using the EaselJS </span>
</span><span class='line'>          <span class="c1">//Graphics.getRGB static method.</span>
</span><span class='line'>          <span class="c1">//This creates a white color, with an alpha</span>
</span><span class='line'>          <span class="c1">//of .7</span>
</span><span class='line'>          <span class="nx">g</span><span class="p">.</span><span class="nx">beginStroke</span><span class="p">(</span><span class="nx">Graphics</span><span class="p">.</span><span class="nx">getRGB</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,.</span><span class="mi">7</span><span class="p">));</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//draw the circle</span>
</span><span class='line'>          <span class="nx">g</span><span class="p">.</span><span class="nx">drawCircle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="nx">CIRCLE_RADIUS</span><span class="p">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//note that the circle has not been drawn yet. </span>
</span><span class='line'>          <span class="c1">//the Graphics instance just has the commands to</span>
</span><span class='line'>          <span class="c1">//draw the circle.</span>
</span><span class='line'>          <span class="c1">//It will be drawn when the stage needs to render it</span>
</span><span class='line'>          <span class="c1">//which is usually when we call stage.tick()</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//create a new Shape instance. This is a DisplayObject</span>
</span><span class='line'>          <span class="c1">//which can be added directly to the stage (and rendered).</span>
</span><span class='line'>          <span class="c1">//Pass in the Graphics instance that we created, and that</span>
</span><span class='line'>          <span class="c1">//we want the Shape to draw.</span>
</span><span class='line'>          <span class="nx">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shape</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//set the initial x position, and the reset position</span>
</span><span class='line'>          <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">circleXReset</span> <span class="o">=</span> <span class="o">-</span><span class="nx">CIRCLE_RADIUS</span><span class="p">;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//set the y position</span>
</span><span class='line'>          <span class="nx">circle</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//add the circle to the stage.</span>
</span><span class='line'>          <span class="nx">stage</span><span class="p">.</span><span class="nx">addChild</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//tell the stage to render to the canvas</span>
</span><span class='line'>          <span class="nx">stage</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
</span><span class='line'>          
</span><span class='line'>          <span class="nx">Ticker</span><span class="p">.</span><span class="nx">setFPS</span><span class="p">(</span><span class="mi">24</span><span class="p">);</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//Subscribe to the Tick class. This will call the tick</span>
</span><span class='line'>          <span class="c1">//method at a set interval (similar to ENTER_FRAME with</span>
</span><span class='line'>          <span class="c1">//the Flash Player)</span>
</span><span class='line'>          <span class="nx">Ticker</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      
</span><span class='line'>      <span class="c1">//function called by the Tick instance at a set interval</span>
</span><span class='line'>      <span class="kd">function</span> <span class="nx">tick</span><span class="p">()</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="c1">//check and see if the Shape has gone of the right</span>
</span><span class='line'>          <span class="c1">//of the stage.</span>
</span><span class='line'>          <span class="k">if</span><span class="p">(</span><span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">bounds</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span>
</span><span class='line'>          <span class="p">{</span>
</span><span class='line'>              <span class="c1">//if it has, reset it.</span>
</span><span class='line'>              <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">circleXReset</span><span class="p">;</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//move the circle over 10 pixels</span>
</span><span class='line'>          <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="mi">8</span><span class="p">;</span>
</span><span class='line'>          
</span><span class='line'>          <span class="c1">//re-render the stage</span>
</span><span class='line'>          <span class="nx">stage</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="nt">&lt;/script&gt;</span>
</span><span class='line'>  
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'><span class="nt">&lt;body</span> <span class="na">onload=</span><span class="s">&quot;init()&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">width=</span><span class="s">&quot;400&quot;</span> <span class="na">height=</span><span class="s">&quot;300&quot;</span> <span class="na">id=</span><span class="s">&quot;canvasWrapper&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;canvas</span> <span class="na">width=</span><span class="s">&quot;400&quot;</span> <span class="na">height=</span><span class="s">&quot;300&quot;</span> <span class="na">id=</span><span class="s">&quot;stageCanvas&quot;</span><span class="nt">&gt;&lt;/canvas&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can download the code for the example from <a href="https://github.com/mikechambers/ExamplesByMesh/tree/master/HTML5/EaselJS/HelloWorld">here</a>.</p>

<p>As you can see, the code is pretty simple, and its structure is very similar to using the DisplayList API within the Flash Player.</p>

<p>There are a couple of things that are important to point out.</p>

<p>The EaselJS <a href="http://easeljs.com/docs/symbols/Stage.html">Stage</a> instance wraps the Canvas element, and handles when and how items are rendered. The stage is only rendered when you call <code>stage.update()</code>, and for performance reasons, you should only call this if something has changed and you need to update the canvas.</p>

<p>The <a href="http://easeljs.com/docs/symbols/Ticker.html">Ticker</a> class handles time management. It will call a tick event on any object that has subscribed to be notified. This is analogous to the <code>ENTER_FRAME</code> event in ActionScript.</p>

<p>If you resize the canvas, then its contents will be erased. However, using EaselJS, all you need to do is call <code>stage.update()</code> after resizing in order to re-render the graphics.</p>

<p>Given the lack of Canvas support in Internet Explorer, it is important that you detect for Canvas support in the browser, and provide an appropriate fall back for the user. I have some simple code in the example above, or you can use the <a href="http://www.modernizr.com/">Modernizr JavaScript Library</a> which provides an API for detecting support for HTML5 features.</p>

<p>Finally, this is an early release of the library, and thus APIs may (and probably will) change. In addition, some things which you might expect to work may not be supported yet. For example, there are currently no APIs to retrieve the height / width of a DisplayObject (you will have to figure it out yourself). However, in general, the library is very robust and has been used in some <a href="http://gskinner.com/blog/archives/2010/12/pirates-love-daisies-html5-game-launches.html">production projects</a>.</p>

<p>Here are some resources which are useful if you want to start playing around with the Canvas element via EaselJS:</p>

<ul>
<li><a href="http://www.easeljs.com">EaselJS Homepage</a></li>
<li><a href="http://easeljs.com/docs/">EaselJS API Docs</a></li>
<li><a href="http://www.modernizr.com/">Modernizr JavaScript Library</a> (for detecting support for HTML5 features).</li>
<li><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element">Canvas Element Draft Specification</a></li>
<li><a href="http://en.wikipedia.org/wiki/Canvas_element">Canvas Element</a> (Wikipedia)</li>
<li><a href="http://diveintohtml5.org/canvas.html">Let&rsquo;s call it a draw(ing surface)</a> Good introduction to the low level Canvas API.</li>
<li><a href="http://html5test.com/">HTML5 Browser Support Matrix</a></li>
<li><a href="http://html5readiness.com/">HTML5 and CSS3 Readiness</a></li>
<li><a href="http://www.findmebyip.com/#target-selector">HTML5 Support in your Browser</a></li>
</ul>


<p>UPDATED : (02/15/2010) : Updated to work with EaselJS 0.3.1 release.</p>

<p>Post any questions / comments in the comments section below.</p>
</div>


  <footer>
    <p class="meta">
      <!--
  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>

      








  


<time datetime="2011-01-19T00:00:00-08:00" pubdate data-updated="true"></time>
-->

  

<span class="byline author vcard">Posted by <span class="fn">mikechambers</span></span>
 on 








  


<time datetime="2011-01-19T00:00:00-08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/blog/categories/general/'>General</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="/blog//twitter.com/share" class="twitter-share-button" data-url="http://www.mikechambers.com/blog/2011/01/19/getting-started-with-the-canvas-element-and-easeljs/" data-via="mesh" data-counturl="http://www.mikechambers.com/blog/2011/01/19/getting-started-with-the-canvas-element-and-easeljs/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/09/10/update-on-flash-and-iphone-development/" title="Previous Post: Update on Flash and iPhone development">&laquo; Update on Flash and iPhone development</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/01/24/easeljs-example-follow-drone/" title="Next Post: EaselJS / Canvas Example : Follow Drone">EaselJS / Canvas Example : Follow Drone &raquo;</a>
      
    </p>
  </footer>
</article>

</div>
<!--

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/blog/2013/12/14/test-post/">Test Post</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/08/simple-http-server-for-local-testing/">Simple HTTP Server for Local Testing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/02/north-american-flash-community-tour/">North American Flash Community Tour</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/22/flash-roadmap-whitepaper-published/">Flash Roadmap Whitepaper Published</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/13/in-europe-to-discuss-flash-roadmap/">In Europe to Discuss Flash Roadmap</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mikechambers">@mikechambers</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mikechambers',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:mikechambers">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "mikechambers"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/mikechambers@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

-->

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Mike Chambers -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mikechambers';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
